"use strict";function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(t,!0).forEach(function(r){_defineProperty(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(t).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function _defineProperty(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}var express=require("express"),router=express.Router();router.get("/",function(e,t){var o,n;return regeneratorRuntime.async(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,regeneratorRuntime.awrap(e.db.collection("productos").get());case 3:o=r.sent,n=o.docs.map(function(r){return _objectSpread({id:r.id},r.data())}),t.status(200).json(n),r.next=12;break;case 8:r.prev=8,r.t0=r.catch(0),console.error("Error al obtener productos:",r.t0),t.status(500).json({error:"Error al obtener productos"});case 12:case"end":return r.stop()}},null,null,[[0,8]])}),router.get("/:id",function(e,t){var o,n;return regeneratorRuntime.async(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,o=e.params.id,console.log("ID recibido para obtener producto:",o),r.next=5,regeneratorRuntime.awrap(e.db.collection("productos").doc(o).get());case 5:(n=r.sent).exists?t.status(200).json(_objectSpread({id:n.id},n.data())):t.status(404).json({error:"Producto no encontrado"}),r.next=13;break;case 9:r.prev=9,r.t0=r.catch(0),console.error("Error al obtener producto por ID:",r.t0),t.status(500).json({error:"Error al obtener producto por ID"});case 13:case"end":return r.stop()}},null,null,[[0,9]])}),router.post("/",function(e,t){var o,n;return regeneratorRuntime.async(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,o=e.body,r.next=4,regeneratorRuntime.awrap(e.db.collection("productos").add(o));case 4:n=r.sent,t.status(201).json(_objectSpread({id:n.id},o)),r.next=12;break;case 8:r.prev=8,r.t0=r.catch(0),console.error("Error al agregar producto:",r.t0),t.status(500).json({error:"Error al agregar producto"});case 12:case"end":return r.stop()}},null,null,[[0,8]])}),router.put("/:id",function(e,t){var o,n;return regeneratorRuntime.async(function(r){for(;;)switch(r.prev=r.next){case 0:if(r.prev=0,o=e.params.id,n=e.body,0===Object.keys(n).length)return r.abrupt("return",t.status(400).json({error:"El objeto de actualización no puede estar vacío"}));r.next=5;break;case 5:return r.next=7,regeneratorRuntime.awrap(e.db.collection("productos").doc(o).update(n));case 7:t.status(200).json({message:"Producto actualizado correctamente"}),r.next=14;break;case 10:r.prev=10,r.t0=r.catch(0),console.error("Error al actualizar producto:",r.t0),t.status(500).json({error:"Error al actualizar producto"});case 14:case"end":return r.stop()}},null,null,[[0,10]])}),router.delete("/:id",function(e,t){var o;return regeneratorRuntime.async(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,o=e.params.id,console.log("ID recibido para eliminar producto:",o),r.next=5,regeneratorRuntime.awrap(e.db.collection("productos").doc(o).delete());case 5:t.status(200).json({message:"Producto eliminado correctamente"}),r.next=12;break;case 8:r.prev=8,r.t0=r.catch(0),console.error("Error al eliminar producto:",r.t0),t.status(500).json({error:"Error al eliminar producto"});case 12:case"end":return r.stop()}},null,null,[[0,8]])}),module.exports=router;
//# sourceMappingURL=rutasProductos.min.js.map
